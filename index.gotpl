<!DOCTYPE html>
<html lang="en">
<head>
    <title>Font Library</title>
    <link rel="stylesheet" href="/static/style.css">
    {{range .}}
    <style>
        {{safeCSS .CSS}}
    </style>
    {{end}}
</head>
<body>
    <h1>Font Library</h1>
    
    <div class="upload-form">
        <h2>Upload Font</h2>
        <form id="uploadForm" enctype="multipart/form-data" method="post" action="/upload">
            <div class="form-group">
                <label for="fontFile" class="form-label">Font File:</label>
                <input type="file" id="fontFile" name="fontFile" accept=".ttf,.otf,.woff,.woff2,.eot" required class="form-input">
            </div>
            <div class="form-group">
                <label for="fontName" class="form-label">Font Name:</label>
                <input type="text" id="fontName" name="fontName" placeholder="Leave empty to use filename" class="form-input">
            </div>
            <div class="form-group">
                <label for="source" class="form-label">Source:</label>
                <input type="text" id="source" name="source" placeholder="e.g., Google Fonts, Adobe, etc." class="form-input">
            </div>
            <div class="form-group">
                <label class="form-label">
                    <input type="checkbox" id="commercialUse" name="commercialUse" class="form-checkbox">
                    Commercial Use Allowed
                </label>
            </div>
            <div class="form-group">
                <label for="projects" class="form-label">Projects (comma-separated):</label>
                <input type="text" id="projects" name="projects" placeholder="e.g., website, branding, print" class="form-input">
            </div>
            <div class="form-group">
                <label for="tags" class="form-label">Tags (comma-separated):</label>
                <input type="text" id="tags" name="tags" placeholder="e.g., serif, display, modern" class="form-input">
            </div>
            <button type="submit" class="upload-button">Upload Font</button>
        </form>
        <div id="uploadStatus" class="upload-status"></div>
    </div>
    {{range .}}
    <div class="font-item">
        <div class="font-name">{{.Name}}</div>
        <div class="metadata">
            <div class="metadata-item"><strong>File:</strong> {{.Filename}}</div>
            <div class="metadata-item"><strong>Source:</strong> {{.Metadata.Source}}</div>
            <div class="metadata-item"><strong>Commercial Use:</strong> {{.Metadata.CommercialUse}}</div>
            {{if .Metadata.Projects}}<div class="metadata-item"><strong>Projects:</strong> {{range $i, $p := .Metadata.Projects}}{{if $i}}, {{end}}{{$p}}{{end}}</div>{{end}}
            {{if .Metadata.Tags}}<div class="metadata-item"><strong>Tags:</strong> {{range $i, $t := .Metadata.Tags}}{{if $i}}, {{end}}{{$t}}{{end}}</div>{{end}}
        </div>
        <div class="preview" style="font-family: '{{.Name}}';">The quick brown fox jumps over the lazy dog</div>
    </div>
    {{end}}
</body>
</html>